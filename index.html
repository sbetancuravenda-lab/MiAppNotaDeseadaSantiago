<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Nota Deseada con Chuleo</title>
    <style>
        /* Estilos generales */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            min-height: 100vh;
            background-color: #f5f7fa;
            color: #333;
        }
        
        /* Men√∫ lateral */
        .sidebar {
            width: 250px;
            background: linear-gradient(180deg, #2c3e50 0%, #1a252f 100%);
            color: white;
            padding: 20px 0;
            transition: all 0.3s;
            box-shadow: 3px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        
        .logo {
            text-align: center;
            padding: 20px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .logo h2 {
            font-size: 1.5rem;
            color: #3498db;
        }
        
        .logo p {
            font-size: 0.85rem;
            color: #bdc3c7;
            margin-top: 5px;
        }
        
        .menu {
            list-style: none;
        }
        
        .menu li {
            margin-bottom: 5px;
        }
        
        .menu li a {
            display: block;
            color: #ecf0f1;
            text-decoration: none;
            padding: 15px 25px;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .menu li a:hover {
            background-color: rgba(52, 152, 219, 0.1);
            border-left-color: #3498db;
            color: #3498db;
        }
        
        .menu li.active a {
            background-color: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
            color: #3498db;
        }
        
        .menu-icon {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Contenido principal */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        
        header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e1e8ed;
        }
        
        header h1 {
            color: #2c3e50;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        header p {
            color: #7f8c8d;
            font-size: 1.1rem;
            max-width: 800px;
        }
        
        /* Secci√≥n de chuleo */
        .chuleo-section {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
            border-left: 5px solid #3498db;
        }
        
        .chuleo-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .chuleo-title span {
            margin-left: 10px;
            background-color: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .chuleo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .chuleo-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e1e8ed;
            transition: all 0.3s;
        }
        
        .chuleo-item:hover {
            background-color: #e8f4fc;
            border-color: #3498db;
        }
        
        .chuleo-item input[type="checkbox"] {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .chuleo-item label {
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            flex: 1;
        }
        
        .chuleo-percent {
            color: #7f8c8d;
            font-size: 0.9rem;
            background-color: #e1e8ed;
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .chuleo-summary {
            background-color: #f1f8ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px dashed #3498db;
        }
        
        .chuleo-summary h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .chuleo-summary p {
            color: #5a6c7d;
            line-height: 1.5;
        }
        
        .chuleo-summary strong {
            color: #2c3e50;
        }
        
        /* Secciones */
        .section {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            animation: fadeIn 0.5s;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
            font-size: 1.8rem;
        }
        
        /* Formulario de c√°lculo */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .form-col {
            flex: 1;
            min-width: 200px;
        }
        
        .input-with-info {
            position: relative;
        }
        
        .input-info {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input[type="number"]:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: #2980b9;
        }
        
        .btn-calculate {
            display: block;
            margin: 30px auto;
            min-width: 200px;
        }
        
        /* Resultado */
        .result-container {
            margin-top: 40px;
            text-align: center;
            padding: 25px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 5px solid #3498db;
        }
        
        .result-title {
            color: #2c3e50;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .result-value {
            font-size: 3rem;
            font-weight: 700;
            color: #2c3e50;
            margin: 15px 0;
        }
        
        .result-value.high {
            color: #e74c3c;
        }
        
        .result-value.medium {
            color: #f39c12;
        }
        
        .result-value.low {
            color: #27ae60;
        }
        
        .result-value.impossible {
            color: #e74c3c;
            text-decoration: line-through;
        }
        
        .result-formula {
            color: #7f8c8d;
            font-style: italic;
            margin-top: 20px;
            font-size: 0.95rem;
        }
        
        .required-grades {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4fc;
            border-radius: 8px;
            text-align: left;
        }
        
        .required-grades h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .grade-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(52, 152, 219, 0.2);
        }
        
        .grade-item:last-child {
            border-bottom: none;
        }
        
        .grade-name {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .grade-value {
            font-weight: 700;
        }
        
        .grade-value.required {
            color: #e74c3c;
        }
        
        .grade-value.optional {
            color: #f39c12;
        }
        
        /* Informaci√≥n */
        .info-box {
            background-color: #e8f4fc;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 0 6px 6px 0;
        }
        
        .info-box h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .info-box p {
            color: #5a6c7d;
            line-height: 1.6;
        }
        
        .formula-box {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 6px;
            margin: 25px 0;
            font-family: 'Courier New', monospace;
            border: 1px solid #e1e8ed;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                padding: 10px 0;
            }
            
            .menu {
                display: flex;
                justify-content: space-around;
                flex-wrap: wrap;
            }
            
            .menu li {
                margin: 5px;
            }
            
            .menu li a {
                padding: 10px 15px;
                border-left: none;
                border-bottom: 3px solid transparent;
            }
            
            .menu li a:hover,
            .menu li.active a {
                border-left: none;
                border-bottom-color: #3498db;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .chuleo-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Bot√≥n de men√∫ m√≥vil */
        .menu-toggle {
            display: none;
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 1.5rem;
            cursor: pointer;
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 100;
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }
            
            .sidebar {
                position: fixed;
                height: 100vh;
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .chuleo-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Estado de los campos deshabilitados */
        input:disabled {
            background-color: #f5f5f5;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .chuleo-item.disabled {
            opacity: 0.6;
            background-color: #f0f0f0;
        }
        
        .chuleo-item.disabled label {
            color: #aaa;
        }
        
        .chuleo-item.checked {
            background-color: #e8f4fc;
            border-color: #3498db;
        }
        
        .chuleo-item.checked label {
            color: #3498db;
        }
    </style>
</head>
<body>
    <!-- Bot√≥n para men√∫ m√≥vil -->
    <button class="menu-toggle" id="menuToggle">‚ò∞</button>
    
    <!-- Men√∫ lateral -->
    <nav class="sidebar" id="sidebar">
        <div class="logo">
            <h2>Calculadora de Notas</h2>
            <p>Con sistema de "chuleo"</p>
        </div>
        <ul class="menu">
            <li class="active"><a href="#calculator"><span class="menu-icon">üìä</span> Calculadora</a></li>
            <li><a href="#info"><span class="menu-icon">‚ÑπÔ∏è</span> Informaci√≥n</a></li>
            <li><a href="#formula"><span class="menu-icon">üìù</span> F√≥rmula</a></li>
            <li><a href="#about"><span class="menu-icon">üë®‚Äçüéì</span> Acerca de</a></li>
        </ul>
    </nav>
    
    <!-- Contenido principal -->
    <main class="main-content">
        <header>
            <h1>Calculadora de Nota Deseada con "Chuleo"</h1>
            <p>Selecciona qu√© notas ya tienes ("chulealas") y calcula lo que necesitas en las restantes para alcanzar tu objetivo.</p>
        </header>
        
        <!-- Secci√≥n de Chuleo -->
        <div class="chuleo-section">
            <h3 class="chuleo-title">¬øQu√© notas ya tienes? <span>Chul√©alas</span></h3>
            
            <div class="chuleo-grid" id="chuleoGrid">
                <!-- Los elementos de chuleo se generar√°n con JavaScript -->
            </div>
            
            <div class="chuleo-summary" id="chuleoSummary">
                <h4>Resumen de selecci√≥n</h4>
                <p id="summaryText">No has seleccionado ninguna nota todav√≠a. Selecciona las notas que ya tienes para calcular lo que necesitas en las restantes.</p>
                <p id="percentageText" style="margin-top: 10px; font-weight: 600;"></p>
            </div>
        </div>
        
        <!-- Secci√≥n Calculadora -->
        <section id="calculator" class="section active">
            <h2 class="section-title">Calculadora de Nota Deseada</h2>
            
            <div class="info-box">
                <h3>Instrucciones</h3>
                <p>Introduce las notas que ya tienes en las casillas correspondientes. Las casillas de notas que no hayas "chuleado" estar√°n deshabilitadas. La calculadora determinar√° lo que necesitas en las evaluaciones restantes para alcanzar tu nota objetivo.</p>
            </div>
            
            <div class="form-row">
                <div class="form-col">
                    <div class="form-group">
                        <label for="q1">Quiz 1 (5%)</label>
                        <div class="input-with-info">
                            <input type="number" id="q1" min="0" max="5" step="0.1" placeholder="Ej: 4.2">
                            <span class="input-info">/ 5.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="p1">Parcial 1 (20%)</label>
                        <div class="input-with-info">
                            <input type="number" id="p1" min="0" max="5" step="0.1" placeholder="Ej: 3.8">
                            <span class="input-info">/ 5.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="q2">Quiz 2 (5%)</label>
                        <div class="input-with-info">
                            <input type="number" id="q2" min="0" max="5" step="0.1" placeholder="Ej: 4.5">
                            <span class="input-info">/ 5.0</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-col">
                    <div class="form-group">
                        <label for="p2">Parcial 2 (20%)</label>
                        <div class="input-with-info">
                            <input type="number" id="p2" min="0" max="5" step="0.1" placeholder="Ej: 4.0">
                            <span class="input-info">/ 5.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="q3">Quiz 3 (5%)</label>
                        <div class="input-with-info">
                            <input type="number" id="q3" min="0" max="5" step="0.1" placeholder="Ej: 3.9">
                            <span class="input-info">/ 5.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="p3">Parcial 3 (20%)</label>
                        <div class="input-with-info">
                            <input type="number" id="p3" min="0" max="5" step="0.1" placeholder="Ej: 3.5">
                            <span class="input-info">/ 5.0</span>
                        </div>
                    </div>
                </div>
                
                <div class="form-col">
                    <div class="form-group">
                        <label for="q4">Quiz 4 (5%)</label>
                        <div class="input-with-info">
                            <input type="number" id="q4" min="0" max="5" step="0.1" placeholder="Ej: 4.1">
                            <span class="input-info">/ 5.0</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="desired-grade">Nota final deseada</label>
                        <div class="input-with-info">
                            <input type="number" id="desired-grade" min="0" max="5" step="0.1" value="3.0">
                            <span class="input-info">/ 5.0</span>
                        </div>
                        <small style="color: #7f8c8d;">Puedes cambiar esta nota si deseas otro objetivo</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="p4">Parcial 4 (20%)</label>
                        <div class="input-with-info">
                            <input type="number" id="p4" min="0" max="5" step="0.1" placeholder="Calculado autom√°ticamente" disabled>
                            <span class="input-info">/ 5.0</span>
                        </div>
                        <small style="color: #7f8c8d;">Esta nota se calcular√° autom√°ticamente</small>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-calculate" id="calculateBtn">Calcular Notas Necesarias</button>
            
            <div id="result" class="result-container" style="display: none;">
                <h3 class="result-title">Resultados del c√°lculo</h3>
                
                <div id="resultSummary" style="margin-bottom: 20px; color: #5a6c7d;">
                    <!-- Resumen din√°mico -->
                </div>
                
                <div id="requiredGrades" class="required-grades">
                    <h4>Notas necesarias en evaluaciones pendientes</h4>
                    <div id="gradesList">
                        <!-- Lista de notas necesarias -->
                    </div>
                </div>
                
                <div id="finalResult" style="margin-top: 25px;">
                    <h4>Nota necesaria en el cuarto parcial:</h4>
                    <div id="resultValue" class="result-value">0.000</div>
                    <p id="resultMessage">Para alcanzar una nota final de <span id="targetGrade">3.0</span></p>
                    <p id="impossibleMessage" style="color: #e74c3c; font-weight: 600; display: none; margin-top: 10px;">
                        ‚ö†Ô∏è Nota: Es imposible alcanzar esta calificaci√≥n con las notas actuales.
                    </p>
                </div>
                
                <p class="result-formula" id="formulaDisplay">F√≥rmula aplicada: X = (3 - (Q1+Q2+Q3+Q4)*0.05 - (P1+P2+P3)*0.20) / 0.20</p>
            </div>
        </section>
        
        <!-- Secci√≥n Informaci√≥n -->
        <section id="info" class="section">
            <h2 class="section-title">Informaci√≥n sobre el "Chuleo"</h2>
            
            <div class="info-box">
                <h3>¬øQu√© es "chulear" notas?</h3>
                <p>"Chulear" una nota significa que ya conoces tu calificaci√≥n en esa evaluaci√≥n. Al marcar una casilla en la secci√≥n de chuleo, est√°s indicando que ya tienes esa nota y puedes ingresarla en el formulario.</p>
            </div>
            
            <div class="info-box">
                <h3>¬øC√≥mo funciona el sistema?</h3>
                <p>El sistema calcula autom√°ticamente lo que necesitas en las evaluaciones que NO has chuleado para alcanzar tu nota objetivo final. Esto te permite:</p>
                <ul style="margin-left: 20px; margin-top: 10px; color: #5a6c7d; line-height: 1.6;">
                    <li><strong>Planificar tu estudio</strong>: Saber en qu√© evaluaciones necesitas enfocarte m√°s</li>
                    <li><strong>Establecer metas realistas</strong>: Ver si tu objetivo es alcanzable con tus notas actuales</li>
                    <li><strong>Tomar decisiones</strong>: Decidir si necesitas mejorar en ciertas √°reas</li>
                </ul>
            </div>
            
            <div class="info-box">
                <h3>Distribuci√≥n de porcentajes</h3>
                <p>El c√°lculo se basa en la siguiente distribuci√≥n de porcentajes:</p>
                <ul style="margin-left: 20px; margin-top: 10px; color: #5a6c7d; line-height: 1.6;">
                    <li>Quizzes (4 en total): 5% cada uno (20% en total)</li>
                    <li>Parciales (4 en total): 20% cada uno (80% en total)</li>
                </ul>
                <p style="margin-top: 10px;">Nota: La calculadora asume que todas las evaluaciones se califican sobre 5.0.</p>
            </div>
        </section>
        
        <!-- Secci√≥n F√≥rmula -->
        <section id="formula" class="section">
            <h2 class="section-title">F√≥rmula de C√°lculo con Chuleo</h2>
            
            <div class="info-box">
                <h3>Explicaci√≥n de la f√≥rmula adaptada</h3>
                <p>Cuando chuleas algunas notas, la f√≥rmula se adapta para calcular lo que necesitas en las evaluaciones restantes. La f√≥rmula b√°sica sigue siendo la misma, pero solo considera las notas que ya has ingresado (las chuleadas).</p>
            </div>
            
            <div class="formula-box">
                <p>Si conoces algunas notas, el c√°lculo se ajusta as√≠:</p>
                <p>Nota_objetivo = (N - Œ£(notas_conocidas √ó porcentaje)) / Œ£(porcentajes_restantes)</p>
                <br>
                <p>Donde:</p>
                <p>N = Nota final deseada</p>
                <p>notas_conocidas = Notas que ya has chuleado e ingresado</p>
                <p>porcentajes_restantes = Suma de porcentajes de evaluaciones no chuleadas</p>
            </div>
            
            <div class="info-box">
                <h3>Ejemplo con chuleo</h3>
                <p>Supongamos que chuleas los primeros 3 quizzes y los 2 primeros parciales:</p>
                <ul style="margin-left: 20px; color: #5a6c7d; line-height: 1.8;">
                    <li>Quizzes chuleados: Q1=4.0, Q2=4.2, Q3=3.8</li>
                    <li>Parciales chuleados: P1=3.5, P2=4.0</li>
                    <li>Nota deseada: 3.0</li>
                </ul>
                <p style="margin-top: 10px;">El sistema calcular√° lo que necesitas en:</p>
                <ul style="margin-left: 20px; color: #5a6c7d; line-height: 1.8;">
                    <li>Quiz 4 (5%)</li>
                    <li>Parcial 3 (20%)</li>
                    <li>Parcial 4 (20%)</li>
                </ul>
                <p style="margin-top: 10px;">Distribuyendo el esfuerzo necesario entre estas 3 evaluaciones.</p>
            </div>
        </section>
        
        <!-- Secci√≥n Acerca de -->
        <section id="about" class="section">
            <h2 class="section-title">Acerca de</h2>
            
            <div class="info-box">
                <h3>Sistema de "chuleo" de notas</h3>
                <p>Esta caracter√≠stica √∫nica permite a los estudiantes marcar qu√© evaluaciones ya han completado y conocer sus calificaciones, para luego calcular exactamente lo que necesitan en las evaluaciones restantes para alcanzar sus objetivos acad√©micos.</p>
            </div>
            
            <div class="info-box">
                <h3>C√≥digo original en Python</h3>
                <div class="formula-box">
                    <p>print("========Nota deseada========")</p>
                    <p>Q1=float(input("Ingresa la nota del primer quiz: "))</p>
                    <p>P1=float(input("Ingresa la nota del primer parcial: "))</p>
                    <p>Q2=float(input("Ingresa la nota del segundo quiz: "))</p>
                    <p>P2=float(input("Ingresa la nota del segundo parcial: "))</p>
                    <p>Q3=float(input("Ingresa la nota del tercer quiz: "))</p>
                    <p>P3=float(input("Ingresa la nota del tercer parcial: "))</p>
                    <p>Q4=float(input("Ingresa la nota del cuarto quiz: "))</p>
                    <p>Xn= 3-(Q1+Q2+Q3+Q4)*0.05 - (P1+P2+P3)*0.20</p>
                    <p>Xd= 0.20</p>
                    <p>X= Xn/Xd</p>
                    <p>print(f"La nota deseada es: {X:.3}")</p>
                </div>
            </div>
            
            <div class="info-box">
                <h3>Caracter√≠sticas de esta implementaci√≥n</h3>
                <p>Esta versi√≥n web incluye:</p>
                <ul style="margin-left: 20px; color: #5a6c7d; line-height: 1.6;">
                    <li>Sistema de "chuleo" para marcar notas conocidas</li>
                    <li>C√°lculo de lo necesario en evaluaciones pendientes</li>
                    <li>Interfaz gr√°fica amigable con men√∫ lateral</li>
                    <li>Validaci√≥n de entradas y c√°lculo instant√°neo</li>
                    <li>Dise√±o responsivo para dispositivos m√≥viles</li>
                    <li>Posibilidad de cambiar la nota objetivo</li>
                    <li>Indicadores visuales de dificultad</li>
                </ul>
            </div>
        </section>
    </main>

    <script>
        // Elementos del DOM
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const menuItems = document.querySelectorAll('.menu li a');
        const sections = document.querySelectorAll('.section');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultContainer = document.getElementById('result');
        const resultValue = document.getElementById('resultValue');
        const targetGradeElement = document.getElementById('targetGrade');
        const formulaDisplay = document.getElementById('formulaDisplay');
        const resultMessage = document.getElementById('resultMessage');
        const impossibleMessage = document.getElementById('impossibleMessage');
        const resultSummary = document.getElementById('resultSummary');
        const gradesList = document.getElementById('gradesList');
        const chuleoGrid = document.getElementById('chuleoGrid');
        const summaryText = document.getElementById('summaryText');
        const percentageText = document.getElementById('percentageText');
        
        // Datos de las evaluaciones
        const evaluations = [
            { id: 'q1', name: 'Quiz 1', percent: 5, value: 0, chuleado: true },
            { id: 'p1', name: 'Parcial 1', percent: 20, value: 0, chuleado: true },
            { id: 'q2', name: 'Quiz 2', percent: 5, value: 0, chuleado: true },
            { id: 'p2', name: 'Parcial 2', percent: 20, value: 0, chuleado: true },
            { id: 'q3', name: 'Quiz 3', percent: 5, value: 0, chuleado: true },
            { id: 'p3', name: 'Parcial 3', percent: 20, value: 0, chuleado: true },
            { id: 'q4', name: 'Quiz 4', percent: 5, value: 0, chuleado: true },
            { id: 'p4', name: 'Parcial 4', percent: 20, value: 0, chuleado: false }
        ];
        
        // Datos de entrada
        const inputs = {};
        evaluations.forEach(eval => {
            inputs[eval.id] = document.getElementById(eval.id);
        });
        inputs['desired-grade'] = document.getElementById('desired-grade');
        
        // Inicializar el grid de chuleo
        function initializeChuleoGrid() {
            chuleoGrid.innerHTML = '';
            
            evaluations.forEach(eval => {
                if (eval.id === 'p4') return; // No incluimos el parcial 4 en el chuleo
                
                const chuleoItem = document.createElement('div');
                chuleoItem.className = `chuleo-item ${eval.chuleado ? 'checked' : ''}`;
                chuleoItem.innerHTML = `
                    <input type="checkbox" id="chk-${eval.id}" ${eval.chuleado ? 'checked' : ''}>
                    <label for="chk-${eval.id}">${eval.name}</label>
                    <span class="chuleo-percent">${eval.percent}%</span>
                `;
                
                const checkbox = chuleoItem.querySelector('input');
                checkbox.addEventListener('change', function() {
                    toggleChuleo(eval.id, this.checked);
                });
                
                chuleoGrid.appendChild(chuleoItem);
            });
            
            updateChuleoSummary();
        }
        
        // Alternar chuleo de una evaluaci√≥n
        function toggleChuleo(id, checked) {
            const evaluation = evaluations.find(e => e.id === id);
            if (evaluation) {
                evaluation.chuleado = checked;
                
                // Actualizar estado del input correspondiente
                const input = inputs[id];
                if (input) {
                    input.disabled = !checked;
                    if (!checked) {
                        input.value = '';
                    }
                }
                
                // Actualizar UI
                updateChuleoUI();
                updateChuleoSummary();
            }
        }
        
        // Actualizar UI del chuleo
        function updateChuleoUI() {
            const chuleoItems = document.querySelectorAll('.chuleo-item');
            chuleoItems.forEach(item => {
                const checkbox = item.querySelector('input');
                const id = checkbox.id.replace('chk-', '');
                const evaluation = evaluations.find(e => e.id === id);
                
                if (evaluation) {
                    if (evaluation.chuleado) {
                        item.classList.add('checked');
                        item.classList.remove('disabled');
                        checkbox.checked = true;
                    } else {
                        item.classList.remove('checked');
                        item.classList.add('disabled');
                        checkbox.checked = false;
                    }
                }
            });
        }
        
        // Actualizar resumen del chuleo
        function updateChuleoSummary() {
            const chuleadas = evaluations.filter(e => e.chuleado && e.id !== 'p4');
            const noChuleadas = evaluations.filter(e => !e.chuleado && e.id !== 'p4');
            
            const percentChuleadas = chuleadas.reduce((sum, eval) => sum + eval.percent, 0);
            const percentNoChuleadas = noChuleadas.reduce((sum, eval) => sum + eval.percent, 0) + 20; // +20% del parcial 4
            
            if (chuleadas.length === 0) {
                summaryText.innerHTML = 'No has seleccionado ninguna nota todav√≠a. <strong>Selecciona las notas que ya tienes</strong> para calcular lo que necesitas en las restantes.';
                percentageText.textContent = '';
            } else {
                summaryText.innerHTML = `Has chuleado <strong>${chuleadas.length} evaluaci√≥n(es)</strong>: ${chuleadas.map(e => e.name).join(', ')}. `;
                summaryText.innerHTML += `Falta por ingresar <strong>${noChuleadas.length} evaluaci√≥n(es)</strong>${noChuleadas.length > 0 ? ': ' + noChuleadas.map(e => e.name).join(', ') : ''} y el Parcial 4.`;
                
                percentageText.innerHTML = `Porcentaje chuleado: <strong>${percentChuleadas}%</strong> | Porcentaje pendiente: <strong>${percentNoChuleadas}%</strong>`;
            }
        }
        
        // Navegaci√≥n del men√∫
        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Obtener el ID de la secci√≥n objetivo
                const targetId = this.getAttribute('href').substring(1);
                
                // Actualizar men√∫ activo
                menuItems.forEach(link => {
                    link.parentElement.classList.remove('active');
                });
                this.parentElement.classList.add('active');
                
                // Mostrar secci√≥n correspondiente
                sections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === targetId) {
                        section.classList.add('active');
                    }
                });
                
                // En dispositivos m√≥viles, cerrar el men√∫ despu√©s de seleccionar
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('active');
                }
            });
        });
        
        // Toggle del men√∫ en m√≥viles
        menuToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });
        
        // Cerrar men√∫ al hacer clic fuera en m√≥viles
        document.addEventListener('click', function(e) {
            if (window.innerWidth <= 768 && 
                !sidebar.contains(e.target) && 
                e.target !== menuToggle) {
                sidebar.classList.remove('active');
            }
        });
        
        // Funci√≥n para calcular lo que se necesita en evaluaciones no chuleadas
        function calculateRequiredGrades() {
            // Obtener valores de entrada
            evaluations.forEach(eval => {
                if (eval.id !== 'p4') {
                    const input = inputs[eval.id];
                    eval.value = parseFloat(input.value) || 0;
                }
            });
            
            const desiredGrade = parseFloat(inputs['desired-grade'].value) || 3.0;
            
            // Separar evaluaciones chuleadas y no chuleadas (excluyendo p4)
            const chuleadas = evaluations.filter(e => e.chuleado && e.id !== 'p4');
            const noChuleadas = evaluations.filter(e => !e.chuleado && e.id !== 'p4');
            
            // Calcular puntos obtenidos de evaluaciones chuleadas
            let puntosObtenidos = 0;
            chuleadas.forEach(eval => {
                puntosObtenidos += (eval.value / 5) * eval.percent;
            });
            
            // Calcular puntos necesarios para alcanzar la nota deseada
            const puntosNecesariosTotal = (desiredGrade / 5) * 100;
            const puntosFaltantes = puntosNecesariosTotal - puntosObtenidos;
            
            // Calcular porcentaje total de evaluaciones no chuleadas (incluyendo p4)
            const porcentajeNoChuleadas = noChuleadas.reduce((sum, eval) => sum + eval.percent, 0) + 20; // +20% del parcial 4
            
            // Calcular la nota promedio necesaria en evaluaciones no chuleadas
            const notaPromedioNecesaria = (puntosFaltantes / porcentajeNoChuleadas) * 5;
            
            // Verificar si es posible alcanzar la nota
            const esPosible = notaPromedioNecesaria <= 5;
            
            // Calcular la nota necesaria en el parcial 4 usando la f√≥rmula original
            const Xn = desiredGrade - (inputs.q1.value + inputs.q2.value + inputs.q3.value + inputs.q4.value) * 0.05 - 
                       (inputs.p1.value + inputs.p2.value + inputs.p3.value) * 0.20;
            const Xd = 0.20;
            const X = Xn / Xd;
            
            // Mostrar resultados
            displayResults(chuleadas, noChuleadas, esPosible, notaPromedioNecesaria, X, desiredGrade);
        }
        
        // Mostrar resultados
        function displayResults(chuleadas, noChuleadas, esPosible, notaPromedioNecesaria, notaP4, desiredGrade) {
            // Actualizar resumen
            resultSummary.innerHTML = `
                <p>Has ingresado <strong>${chuleadas.length} evaluaci√≥n(es)</strong> con un total del <strong>${chuleadas.reduce((sum, e) => sum + e.percent, 0)}%</strong> de la nota final.</p>
                <p>Faltan por completar <strong>${noChuleadas.length} evaluaci√≥n(es)</strong> y el Parcial 4, que representan el <strong>${noChuleadas.reduce((sum, e) => sum + e.percent, 0) + 20}%</strong> de la nota final.</p>
            `;
            
            // Mostrar lista de notas necesarias
            gradesList.innerHTML = '';
            
            // Para evaluaciones no chuleadas
            noChuleadas.forEach(eval => {
                const gradeItem = document.createElement('div');
                gradeItem.className = 'grade-item';
                gradeItem.innerHTML = `
                    <span class="grade-name">${eval.name} (${eval.percent}%):</span>
                    <span class="grade-value required">${notaPromedioNecesaria.toFixed(2)} / 5.0</span>
                `;
                gradesList.appendChild(gradeItem);
            });
            
            // Para el parcial 4 (siempre se muestra)
            const gradeItemP4 = document.createElement('div');
            gradeItemP4.className = 'grade-item';
            gradeItemP4.innerHTML = `
                <span class="grade-name">Parcial 4 (20%):</span>
                <span class="grade-value ${esPosible ? 'required' : 'impossible'}">${notaP4.toFixed(3)} / 5.0</span>
            `;
            gradesList.appendChild(gradeItemP4);
            
            // Mostrar resultado principal
            resultValue.textContent = notaP4.toFixed(3);
            targetGradeElement.textContent = desiredGrade.toFixed(1);
            
            // Estilizar seg√∫n el resultado
            resultValue.classList.remove('high', 'medium', 'low', 'impossible');
            
            if (!esPosible || notaP4 > 5) {
                resultValue.classList.add('impossible');
                impossibleMessage.style.display = 'block';
                resultMessage.innerHTML = `Para alcanzar una nota final de <span id="targetGrade">${desiredGrade.toFixed(1)}</span> necesitar√≠as m√°s de 5.0 en el cuarto parcial, lo cual es imposible.`;
            } else if (notaP4 <= 3.0) {
                resultValue.classList.add('low');
                impossibleMessage.style.display = 'none';
                resultMessage.innerHTML = `Para alcanzar una nota final de <span id="targetGrade">${desiredGrade.toFixed(1)}</span> necesitas una nota baja en el cuarto parcial.`;
            } else if (notaP4 <= 4.0) {
                resultValue.classList.add('medium');
                impossibleMessage.style.display = 'none';
                resultMessage.innerHTML = `Para alcanzar una nota final de <span id="targetGrade">${desiredGrade.toFixed(1)}</span> necesitas un desempe√±o moderado en el cuarto parcial.`;
            } else {
                resultValue.classList.add('high');
                impossibleMessage.style.display = 'none';
                resultMessage.innerHTML = `Para alcanzar una nota final de <span id="targetGrade">${desiredGrade.toFixed(1)}</span> necesitas un excelente desempe√±o en el cuarto parcial.`;
            }
            
            // Actualizar f√≥rmula mostrada
            const q1 = parseFloat(inputs.q1.value) || 0;
            const q2 = parseFloat(inputs.q2.value) || 0;
            const q3 = parseFloat(inputs.q3.value) || 0;
            const q4 = parseFloat(inputs.q4.value) || 0;
            const p1 = parseFloat(inputs.p1.value) || 0;
            const p2 = parseFloat(inputs.p2.value) || 0;
            const p3 = parseFloat(inputs.p3.value) || 0;
            
            formulaDisplay.textContent = `F√≥rmula aplicada: X = (${desiredGrade.toFixed(1)} - (${q1.toFixed(1)}+${q2.toFixed(1)}+${q3.toFixed(1)}+${q4.toFixed(1)})√ó0.05 - (${p1.toFixed(1)}+${p2.toFixed(1)}+${p3.toFixed(1)})√ó0.20) / 0.20`;
            
            // Mostrar contenedor de resultado
            resultContainer.style.display = 'block';
            
            // Desplazarse al resultado
            resultContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // Evento para el bot√≥n de c√°lculo
        calculateBtn.addEventListener('click', calculateRequiredGrades);
        
        // Permitir calcular con Enter en cualquier campo
        Object.values(inputs).forEach(input => {
            if (input) {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        calculateRequiredGrades();
                    }
                });
            }
        });
        
        // Generar datos de ejemplo al cargar la p√°gina
        function generateExampleData() {
            // Valores de ejemplo
            const exampleValues = {
                q1: 4.2,
                p1: 3.8,
                q2: 4.5,
                p2: 4.0,
                q3: 3.9,
                p3: 3.5,
                q4: 4.1
            };
            
            // Establecer valores de ejemplo solo para evaluaciones chuleadas
            evaluations.forEach(eval => {
                if (eval.chuleado && exampleValues[eval.id] !== undefined) {
                    inputs[eval.id].value = exampleValues[eval.id];
                    eval.value = exampleValues[eval.id];
                }
            });
            
            // Desmarcar algunas evaluaciones para demostrar el chuleo
            setTimeout(() => {
                toggleChuleo('q3', false);
                toggleChuleo('p3', false);
            }, 100);
        }
        
        // Inicializar la aplicaci√≥n
        window.addEventListener('DOMContentLoaded', function() {
            // Inicializar grid de chuleo
            initializeChuleoGrid();
            
            // Inicializar inputs
            evaluations.forEach(eval => {
                if (eval.id !== 'p4') {
                    const input = inputs[eval.id];
                    input.disabled = !eval.chuleado;
                }
            });
            
            // Generar datos de ejemplo
            generateExampleData();
            
            // Calcular autom√°ticamente con los datos de ejemplo
            setTimeout(calculateRequiredGrades, 500);
        });
        
        // Validar entradas (0-5)
        Object.values(inputs).forEach(input => {
            if (input) {
                input.addEventListener('change', function() {
                    let value = parseFloat(this.value);
                    
                    if (isNaN(value)) {
                        this.value = '';
                    } else if (value < 0) {
                        this.value = 0;
                    } else if (value > 5) {
                        this.value = 5;
                    } else {
                        this.value = value.toFixed(1);
                    }
                    
                    // Actualizar el valor en el array de evaluaciones
                    const id = this.id;
                    const evaluation = evaluations.find(e => e.id === id);
                    if (evaluation) {
                        evaluation.value = parseFloat(this.value) || 0;
                    }
                });
            }
        });
    </script>
</body>
</html>